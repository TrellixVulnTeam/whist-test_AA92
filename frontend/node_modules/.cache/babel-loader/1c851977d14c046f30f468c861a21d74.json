{"ast":null,"code":"'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\n\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\n\nconst Common = require('./common');\n\nconst internals = {};\nmodule.exports = internals.Values = class {\n  constructor(values, refs) {\n    this._values = new Set(values);\n    this._refs = new Set(refs);\n    this._lowercase = internals.lowercases(values);\n    this._override = false;\n  }\n\n  get length() {\n    return this._values.size + this._refs.size;\n  }\n\n  add(value, refs) {\n    // Reference\n    if (Common.isResolvable(value)) {\n      if (!this._refs.has(value)) {\n        this._refs.add(value);\n\n        if (refs) {\n          // Skipped in a merge\n          refs.register(value);\n        }\n      }\n\n      return;\n    } // Value\n\n\n    if (!this.has(value, null, null, false)) {\n      this._values.add(value);\n\n      if (typeof value === 'string') {\n        this._lowercase.set(value.toLowerCase(), value);\n      }\n    }\n  }\n\n  static merge(target, source, remove) {\n    target = target || new internals.Values();\n\n    if (source) {\n      if (source._override) {\n        return source.clone();\n      }\n\n      for (const item of [...source._values, ...source._refs]) {\n        target.add(item);\n      }\n    }\n\n    if (remove) {\n      for (const item of [...remove._values, ...remove._refs]) {\n        target.remove(item);\n      }\n    }\n\n    return target.length ? target : null;\n  }\n\n  remove(value) {\n    // Reference\n    if (Common.isResolvable(value)) {\n      this._refs.delete(value);\n\n      return;\n    } // Value\n\n\n    this._values.delete(value);\n\n    if (typeof value === 'string') {\n      this._lowercase.delete(value.toLowerCase());\n    }\n  }\n\n  has(value, state, prefs, insensitive) {\n    return !!this.get(value, state, prefs, insensitive);\n  }\n\n  get(value, state, prefs, insensitive) {\n    if (!this.length) {\n      return false;\n    } // Simple match\n\n\n    if (this._values.has(value)) {\n      return {\n        value\n      };\n    } // Case insensitive string match\n\n\n    if (typeof value === 'string' && value && insensitive) {\n      const found = this._lowercase.get(value.toLowerCase());\n\n      if (found) {\n        return {\n          value: found\n        };\n      }\n    }\n\n    if (!this._refs.size && typeof value !== 'object') {\n      return false;\n    } // Objects\n\n\n    if (typeof value === 'object') {\n      for (const item of this._values) {\n        if (DeepEqual(item, value)) {\n          return {\n            value: item\n          };\n        }\n      }\n    } // References\n\n\n    if (state) {\n      for (const ref of this._refs) {\n        const resolved = ref.resolve(value, state, prefs, null, {\n          in: true\n        });\n\n        if (resolved === undefined) {\n          continue;\n        }\n\n        const items = !ref.in || typeof resolved !== 'object' ? [resolved] : Array.isArray(resolved) ? resolved : Object.keys(resolved);\n\n        for (const item of items) {\n          if (typeof item !== typeof value) {\n            continue;\n          }\n\n          if (insensitive && value && typeof value === 'string') {\n            if (item.toLowerCase() === value.toLowerCase()) {\n              return {\n                value: item,\n                ref\n              };\n            }\n          } else {\n            if (DeepEqual(item, value)) {\n              return {\n                value: item,\n                ref\n              };\n            }\n          }\n        }\n      }\n    }\n\n    return false;\n  }\n\n  override() {\n    this._override = true;\n  }\n\n  values(options) {\n    if (options && options.display) {\n      const values = [];\n\n      for (const item of [...this._values, ...this._refs]) {\n        if (item !== undefined) {\n          values.push(item);\n        }\n      }\n\n      return values;\n    }\n\n    return Array.from([...this._values, ...this._refs]);\n  }\n\n  clone() {\n    const set = new internals.Values(this._values, this._refs);\n    set._override = this._override;\n    return set;\n  }\n\n  concat(source) {\n    Assert(!source._override, 'Cannot concat override set of values');\n    const set = new internals.Values([...this._values, ...source._values], [...this._refs, ...source._refs]);\n    set._override = this._override;\n    return set;\n  }\n\n  describe() {\n    const normalized = [];\n\n    if (this._override) {\n      normalized.push({\n        override: true\n      });\n    }\n\n    for (const value of this._values.values()) {\n      normalized.push(value && typeof value === 'object' ? {\n        value\n      } : value);\n    }\n\n    for (const value of this._refs.values()) {\n      normalized.push(value.describe());\n    }\n\n    return normalized;\n  }\n\n};\ninternals.Values.prototype[Common.symbols.values] = true; // Aliases\n\ninternals.Values.prototype.slice = internals.Values.prototype.clone; // Helpers\n\ninternals.lowercases = function (from) {\n  const map = new Map();\n\n  if (from) {\n    for (const value of from) {\n      if (typeof value === 'string') {\n        map.set(value.toLowerCase(), value);\n      }\n    }\n  }\n\n  return map;\n};","map":{"version":3,"sources":["C:/scripting/jobs assignments/whist/backend/node_modules/joi/lib/values.js"],"names":["Assert","require","DeepEqual","Common","internals","module","exports","Values","constructor","values","refs","_values","Set","_refs","_lowercase","lowercases","_override","length","size","add","value","isResolvable","has","register","set","toLowerCase","merge","target","source","remove","clone","item","delete","state","prefs","insensitive","get","found","ref","resolved","resolve","in","undefined","items","Array","isArray","Object","keys","override","options","display","push","from","concat","describe","normalized","prototype","symbols","slice","map","Map"],"mappings":"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","sourcesContent":["'use strict';\n\nconst Assert = require('@hapi/hoek/lib/assert');\nconst DeepEqual = require('@hapi/hoek/lib/deepEqual');\n\nconst Common = require('./common');\n\n\nconst internals = {};\n\n\nmodule.exports = internals.Values = class {\n\n    constructor(values, refs) {\n\n        this._values = new Set(values);\n        this._refs = new Set(refs);\n        this._lowercase = internals.lowercases(values);\n\n        this._override = false;\n    }\n\n    get length() {\n\n        return this._values.size + this._refs.size;\n    }\n\n    add(value, refs) {\n\n        // Reference\n\n        if (Common.isResolvable(value)) {\n            if (!this._refs.has(value)) {\n                this._refs.add(value);\n\n                if (refs) {                     // Skipped in a merge\n                    refs.register(value);\n                }\n            }\n\n            return;\n        }\n\n        // Value\n\n        if (!this.has(value, null, null, false)) {\n            this._values.add(value);\n\n            if (typeof value === 'string') {\n                this._lowercase.set(value.toLowerCase(), value);\n            }\n        }\n    }\n\n    static merge(target, source, remove) {\n\n        target = target || new internals.Values();\n\n        if (source) {\n            if (source._override) {\n                return source.clone();\n            }\n\n            for (const item of [...source._values, ...source._refs]) {\n                target.add(item);\n            }\n        }\n\n        if (remove) {\n            for (const item of [...remove._values, ...remove._refs]) {\n                target.remove(item);\n            }\n        }\n\n        return target.length ? target : null;\n    }\n\n    remove(value) {\n\n        // Reference\n\n        if (Common.isResolvable(value)) {\n            this._refs.delete(value);\n            return;\n        }\n\n        // Value\n\n        this._values.delete(value);\n\n        if (typeof value === 'string') {\n            this._lowercase.delete(value.toLowerCase());\n        }\n    }\n\n    has(value, state, prefs, insensitive) {\n\n        return !!this.get(value, state, prefs, insensitive);\n    }\n\n    get(value, state, prefs, insensitive) {\n\n        if (!this.length) {\n            return false;\n        }\n\n        // Simple match\n\n        if (this._values.has(value)) {\n            return { value };\n        }\n\n        // Case insensitive string match\n\n        if (typeof value === 'string' &&\n            value &&\n            insensitive) {\n\n            const found = this._lowercase.get(value.toLowerCase());\n            if (found) {\n                return { value: found };\n            }\n        }\n\n        if (!this._refs.size &&\n            typeof value !== 'object') {\n\n            return false;\n        }\n\n        // Objects\n\n        if (typeof value === 'object') {\n            for (const item of this._values) {\n                if (DeepEqual(item, value)) {\n                    return { value: item };\n                }\n            }\n        }\n\n        // References\n\n        if (state) {\n            for (const ref of this._refs) {\n                const resolved = ref.resolve(value, state, prefs, null, { in: true });\n                if (resolved === undefined) {\n                    continue;\n                }\n\n                const items = !ref.in || typeof resolved !== 'object'\n                    ? [resolved]\n                    : Array.isArray(resolved) ? resolved : Object.keys(resolved);\n\n                for (const item of items) {\n                    if (typeof item !== typeof value) {\n                        continue;\n                    }\n\n                    if (insensitive &&\n                        value &&\n                        typeof value === 'string') {\n\n                        if (item.toLowerCase() === value.toLowerCase()) {\n                            return { value: item, ref };\n                        }\n                    }\n                    else {\n                        if (DeepEqual(item, value)) {\n                            return { value: item, ref };\n                        }\n                    }\n                }\n            }\n        }\n\n        return false;\n    }\n\n    override() {\n\n        this._override = true;\n    }\n\n    values(options) {\n\n        if (options &&\n            options.display) {\n\n            const values = [];\n\n            for (const item of [...this._values, ...this._refs]) {\n                if (item !== undefined) {\n                    values.push(item);\n                }\n            }\n\n            return values;\n        }\n\n        return Array.from([...this._values, ...this._refs]);\n    }\n\n    clone() {\n\n        const set = new internals.Values(this._values, this._refs);\n        set._override = this._override;\n        return set;\n    }\n\n    concat(source) {\n\n        Assert(!source._override, 'Cannot concat override set of values');\n\n        const set = new internals.Values([...this._values, ...source._values], [...this._refs, ...source._refs]);\n        set._override = this._override;\n        return set;\n    }\n\n    describe() {\n\n        const normalized = [];\n\n        if (this._override) {\n            normalized.push({ override: true });\n        }\n\n        for (const value of this._values.values()) {\n            normalized.push(value && typeof value === 'object' ? { value } : value);\n        }\n\n        for (const value of this._refs.values()) {\n            normalized.push(value.describe());\n        }\n\n        return normalized;\n    }\n};\n\n\ninternals.Values.prototype[Common.symbols.values] = true;\n\n\n// Aliases\n\ninternals.Values.prototype.slice = internals.Values.prototype.clone;\n\n\n// Helpers\n\ninternals.lowercases = function (from) {\n\n    const map = new Map();\n\n    if (from) {\n        for (const value of from) {\n            if (typeof value === 'string') {\n                map.set(value.toLowerCase(), value);\n            }\n        }\n    }\n\n    return map;\n};\n"]},"metadata":{},"sourceType":"script"}